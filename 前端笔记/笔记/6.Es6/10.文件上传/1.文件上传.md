
#### 文件上传

1. 流程
   1) 浏览器获取文件
      1) 之前，浏览器是无法获取本地文件的
      2) **HTML5给input标签新增加了一个type属性`file`**
         1) 给input标签的type设置上`file`属性值，该标签就变成了一个按钮
         2) 点击该按钮，就会弹出一个选择框，用来选择本地文件
         3) 双击本地文件，就可以选中文件
   2) js获取选中的文件数据
      1) 选中对应的input标签(获取dom)
      2) 当选中文件后，就可以通过dom上的files属性获取到选中的文件数据
      3) 获取的是一个数组格式的数据
         1) input标签支持选中多个文件，行间加上`multiple`属性，属性值设置为true
            1) 简写: 行间只写`multiple`，属性值默认为true
         2) 为了保存选中的多个文件的数据，默认格式为数组
   3) 发送请求(传输获取到的文件数据)
      1) 设置请求方式: 由于文件过大，所以上传方式选择`POST`方式
      2) 设置传输的数据格式
         1) 在请求头中设置，对应的键值对为`"Content-Type": "multipart/form-data"`
         2) **该操作可以不用写，请求体设置完成，会自动配置请求头**
      3) 设置请求体
         1) 由于请求是POST格式，所以传输的数据放在请求体中
         2) 请求体通常写成键值对的格式
            1) 键名: 该键名对应的数据，类似对象
            2) 更加灵活的处理数据
         3) 为了约定传输，服务器给定一个键名(防止恶意存储)
            1) 认为，该键名对应的键值才是浏览器传输过来的文件数据，才进行处理保存
            2) 通过其他键值对传输过来的文件数据不进行处理
            3) 安全起见，防止恶意向服务器传输文件，服务器进行保存
         4) form-data格式的数据，比较特殊，写起来麻烦，可以利用构造`函数FormData`进行创建
            1) `const a = new FormData();`  构建一个空的请求体
            2) 向请求体中添加键值对
               1) `a.append("键名", 键值)`
               2) 可以调用多次，添加多个键值对数据，组成请求体


2. 示范代码
```js
async function a() {
    const res = new FormData();
    // img为服务器约定的键名，传入input标签选中的文件数据
    res.append("img", document.getElementById("a").files[0]);
    
    // 发送请求
    await fetch("http://127.0.0.1:10086", {
        method: "POST",
        body: res
    });
}

// 点击按钮，发送文件
document.getElementById("d").onclick = () => {
    a()
};
```




