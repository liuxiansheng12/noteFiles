
#### jws的使用
> 依赖下载: npm i -D jsonwebtoken

示范代码
```js
const express = require("express");
const jsonwebtoken = require("jsonwebtoken");
const app = express();


// 创建一个JWS字符串
// 第一个参数，传入payload部分(就是需要保存的数据)，header部分几乎是固定的
// 第二个参数，传入加密的密钥
// 第三个参数，是一个配置对象
const jws = jsonwebtoken.sign({
    id: '张三',
    password: "123456",
    a: 123,
}, "zhangsan", {
    // 设施JWS，多长时间后失效，通常设置为一天，单位为秒
    // 这个配置，会自动往数据对象中(payload)，自动新增两个字段，一个是创建时间 lat，一个是过期时间 exp
    expiresIn: 0
})
console.log(jws);


// 解码JWS字符串，但是不会进行验证
const data = jsonwebtoken.decode(jws);
console.log(data);


// 解码加JWS合法性验证(是否伪造和篡改)
// 第二个参数，传入的是密钥，因为验证要对前两个部分重新加密，然后做比较
// 也会进行过期时间的计算，如果过期则验证失败
// 如果验证失败，则报错
// 验证成功，得到的是解码后的payload，也就是存放的数据
try {
    const data = jsonwebtoken.verify(jws, "zhangsan");
    console.log(data);
}
catch(e) {
    console.log("验证失败");
}


app.listen(10086, () => {
    console.log("服务器启动成功");
});
```



#### jws的概念

> jws是一种令牌字符串，由服务器生成，通常用来加密一些数据，用来权限的验证
>> 1. 和session、cookie的功能相似，但是也有自己的优点
>> 2. session，在服务端创建存储环境，耗费服务器的资源
>> 3. cookie受浏览器的限制，只有浏览器有cookie
>> 4. **而jws，是把之前需要存放到session或者cookie的数据，经过加密，返回给客户端，客户端自己进行存储。**
>>> 1. 然后后续权限的验证，只需要把加密的数据放在请求中，再发给服务端，服务端手动获取对应的数据，然后进行验证，验证通过，则表示之前登陆过
>>> 2. 由于是服务端手动获取数据，所以加密的数据放在什么地方都可以


> jws 的组成
>> 1. jws是一种加密过后的字符串，所以存放和传输的条件要求不高，可以放在任何地方
>> 2. jws由三部分组成，每一部分由一个点作为分隔符
>>> 1. 第一部分，**header**，格式是一个JSON的对象，然后经过base64编码，然后在经过url编码
>>>> 1. url编码的作用是，可以在地址栏中发送jws
>>>> 2. 这个header部分，主要是为了第三部分服务的，用于指定第三部分使用什么加密的方式进行加密，一共有两种方式可以使用
>>>> 3. 还有一个属性是用来，起一个标示，通常为JWS
>>>> 4. 所以header部分，一共有两个属性，一个加密方式，一个标示
>>> 2. 第二部分，**payload**，格式是一个JSON的对象，然后经过base64编码，然后在经过url编码
>>>> 1. url编码的作用是，可以在地址栏中发送jws
>>>> 2. 这个部分，就是用来存放一些数据
>>>> 3. 这个部分还用一个属性，用来标示，该JWS什么时候失效
>>> 3. 第三部分，**signature**，格式是一个加密后的字符串，用的就是header中指定的加密方式
>>>> 1. 对前两部编码完的字符串进行加密
>>>> 2. **作用，就是为了方式JWS被篡改和伪造**
>>>> 3. 用于服务器的JWS的验证
>>>>> 1. 得到客户端传递过来的JWS，然后重新对前两部分进行加密，如果加密后与第三部分不一样，则表明被篡改或者伪造，则验证失败
>>>>> 2. 客户端的JWS，就是服务端生成的，密钥在服务器中，所以，第三部分不可能伪造出来。只要做了修改，重新加密后，一定有误差