# 组件状态(数据的定义)

其实类组件的本身是没有状态的，它的状态是靠继承React，这样就可以使用React中的一些方法了。

React有一个核心的概念: 只能修改state中自定义的状态(只属于该组件的状态)，如果是传入的状态，是绝对不能修改的。

1. 状态(数据)的定义
    
    1) 在`constructor`中通过`this.state = {}`定义;
    2) 在外部，通过`state = {}`定义
    3) 如果使用了constructor定义了state数据，则外部写的state就会失效，并不会合并和替换

```js
import React from 'react';
class Abc extends React.Component{
    constructor () {
        super();
        this.state = {
            list: [1, 2]
        }
    }
    // 无效
    state = {
        list: [1, 2],
        a: 3
    }
  
    render () {
        return ( ··· )
    }
}
```

2. 状态(数据)的使用

    1)  标签内通过 `{ this.state.*** }`，使用自定义的数据。
    2)  行间通过 `src={ this.state.*** }`，使用自定义的数据。行间属性不需要加:


3. 改变状态(数据)引发重新渲染
    
    1) 直接通过 `this.state.name = ?`，可以对state中定义的状态(数据)进行修改，但是无法进行重新渲染。
    2) 要想进行重新渲染，需要使用`this.setState()`，该方法传递一个对象，传入的对象会与当前的state对象进行合并处理(属性相同，进行替换，无属性进行添加，其它属性不动)。并不会替换state对象。

    3) setState方法，非常强大，无论数据是否发生了变化，只要该方法一经调用。该组件的render重新执行，创建新的React元素对象，并且引发重新渲染。
    如果render中引入了其它的组件，由于jsx的重新解析，所以引入的组件的render也会重新执行，创建出子组件的React元素对象。
    React元素对象重新创建完成，接下来就会重新渲染页面，和vue重新渲染一样，只要该组件中的dom(包括子组件)没有发生变化，是不会重新创建的，而是使用之前的。并且也受key的控制。
    

