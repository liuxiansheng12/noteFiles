

# 组件

## 原理

1. react底层:  
    1) 通过React.createElement()，创建一个react元素
    2) 通过ReactDOM.render()，把创建出的react元素转换成真实的dom，并且进行插入。
    3) React.createElement()传入的第三个参数往后，都是该dom的子节点。
    4) 子节点可以为普通的字符串，即innerText
    5) 子节点也可以传入React元素(再次通过React.createElement()进行创建，然后传入)

2. 根据子节点可以传递React元素，可以进行组件化开发。
    1) 把复杂，重复出现的子节点，提取出来，进行单独的封装。然后产生对应的React元素对象
    2) 要想使用该节点，只需要传入生成的React元素对象即可。

3. 底层代码封装组件:
```js
import React from "react";
import ReactDOM from "react-dom";

// 创建React元素( 手动创建一个React元素对象，使用两次封装好的React元素对象 )
let reactDom = React.createElement("div", {}, 
    React.createElement("span", {}, "123"),
    // 使用组件
    zujian(),
    zujian()
);

// 封装一个简单的组件(其实这种方法就是后面的函数组件)
function zujian() {
    // 返回一个React元素对象(下面可以继续含有子节点，或者引入其他组件React元素对象)
    return React.createElement("div", {}, 
    React.createElement("span", { style: {color: "#f0f"} }, "组件"), 
    React.createElement("span", { style: {color: "#0ff"} }, "组件"),)
}

ReactDOM.render(reactDom, document.querySelector("#app"));
```

4. jsx语法封装组件
底层还是使用React.createElement()，只不过简化了书写方式，更加简单易懂，使用了语法糖

```js
import React from "react";
import ReactDOM from "react-dom";

/**  底层代码(过于复杂)
// 创建React元素( 手动创建一个React元素对象，使用两次封装好的React元素对象 )
let reactDom = React.createElement("div", {}, 
    React.createElement("span", {}, "123"),
    // 使用组件
    zujian(),
    zujian()
);
*/

/** 使用jsx简化代码 */
let reactDom = ( 
    <div>
        <span>123</span>
        { zujian() }
        { zujian() }
    </div>
)


/**  底层代码(过于复杂)
// 封装一个简单的组件(其实这种方法就是后面的函数组件)
function zujian() {
    // 返回一个React元素对象(下面可以继续含有子节点，或者引入其他组件React元素对象)
    return React.createElement("div", {}, 
    React.createElement("span", { style: {color: "#f0f"} }, "组件"), 
    React.createElement("span", { style: {color: "#0ff"} }, "组件"),)
}
*/

/** 使用jsx简化代码 */
function zujian() {
    // 写的的jsx语法，但是函数实际执行的时候，会把jsx解析成对应的React元素对象
    // 并不是返回的还是jsx语法。只要是jsx语法，在函数实际执行的时候，都会转换成React元素对象
    return (
        <div>
            <span style={ {color: "#f0f"} }>组件</span>
            <span style={ {color: "#0ff"} }>组件</span>
        </div>
    )
}

ReactDOM.render(reactDom, document.querySelector("#app"));
```



## 官方给出的React组件定义方法

1.  函数组件(和自己写的一样)
组件函数内部的this指向undefined。
```js
import React from 'react';

function Abc() {
    return (
        <div>我是一个组件</div>
    )
}

// 组件的抛出
export default Abc;
```


2. 类组件
```js
import React from 'react';

class Abc extends React.Component{
  render () {
    return (
      <div> 123 </div>
    )
  }
}

// 组件的抛出
export default Abc;
```

3. 组件的使用
```js
import React from 'react';
import { render } from 'react-dom';

// 组件的引入
import Abc from './components/abc.js';

var div = (
    <div>
        <Abc></Abc>
    </div>
)

render(div, document.getElementById('root'));
```


4. 组件引入时的注意点
    1) 引入时的名字，要符合大驼峰式命名法(首字母必须大写)。
    2) 原因: `<Abc />`，jsx语法，使用组件。底层会使用React.createElement()，创建实际的React元素对象。
    在创建React元素的时候，就是根据首字母是否大写，来决定该jsx语法是否使用的是组件。如果是小写创建对应的React元素。如果是大写，使用组件创建出组件对应的React元素，即{ Abc() }。


