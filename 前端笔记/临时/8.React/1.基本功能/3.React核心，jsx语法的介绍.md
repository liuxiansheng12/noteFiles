

#### jsx语法使用的注意点
    
1. **最外围只能有一个父标签**
   1. 可以为实际的标签，也可以为`<></>或者<React.Fragment></React.Fragment>`，这两种标签最终不会被创建渲染
   2. 其中`<></>`是一个语法糖，底层使用的还是`<React.Fragment></React.Fragment>`。目的在于书写方便

2. **每个标签必须有结束**
   1. `<**></**>` 这两个必须成对存在，可以进行简写 `<** />`。
   2. 比如img标签，不可以写成`<img src="" alt="">`。必须写成`<img></img>`或者`<img />`

3. 可以写算数表达式
   1. 无论行间还是标签的子节点，使用表达式，都必须加上 `{}`
   2. 比如: `<span className={ *** }> { *** } <>`。
   3. `{}`中的表达式会进行运算，把运算完的结果进行填充。
   4. `{}`中不可以写普通的对象，**可以填写React.createElement()创建的对象，渲染出实际的标签**
   5. `{}`中填写数组，最终会遍历该数组，把数组中的每一项作为一个子节点进行填充。**可以实现列表循环渲染**

4. 行间特殊的属性，需要使用别名，与关键字产生了冲突
   1. class要写成className
   2. for要写成htmlFor

5. 行间style的使用
    1. `style="color: #f0f; background: #ff0"`
    2. 使用表达式 `style={ { color: '#f0f', background: '#ff0'} }`。内部是一个对象


6. 把字符串html渲染成正常的html
```js
var arr = "<div>123456</div>"

var div = (<div dangerouslySetInnerHTML={ { __html: arr} }></div>)
render(div, document.getElementById('root'));
```








#### jsx的渲染流程以及仿写jsx渲染
##### 渲染流程
jsx中的HTML语法，首先使用React.createElement()进行解析。所以React名字不可以修改，否则报错，
解析完成后返回一个虚拟dom，然后render利用虚拟dom渲染出实际的样式
解析方法，解析代码如下:
```js
var div = <div id='demo'>12345<spam>111</span></div>
// 实际执行的代码如下:  
var div = React.createElement("div", {id: 'demo'}, '12345', React.createElement("span", null, '111'))
```





##### 仿写jsx渲染
关键两步，创建虚拟dom，使用render进行渲染
```js
// 创建虚拟dom的函数
const React = {
  // type(节点名), props(节点行间属性), ...children(节点里的内容)
  createElement(type, props, ...children) {
    // 返回创建好的虚拟dom
    return {
      type,
      props,
      children
    }
  }
}

// 渲染虚拟节点的函数
const render = (vNode, container) => {
  // 服务于回调，查看传入的是文本节点，还是标签节点
  if(typeof vNode === "string"){
    const text = document.createTextNode(vNode);
    container.appendChild(text);
    return;
  }
  // 标签节点执行的函数
  const {type, props, children} = vNode;     // 提取出虚拟节点中的一些属性
  const ele = document.createElement(type);  // 创建出实际的标签
  for(let key in props){                     // 对行间属性进行添加
    // 滤掉继承
    if(key.startsWith("__")){
      break
    }
    // 添加行间属性
    ele.setAttribute(key, props[key])
  }
  // 进行回调(添加节点下的子节点)
  children.forEach(element => {
    render(element, ele)
  });
  // 最终把创建好的标签进行插入到对应的位置
  container.appendChild(ele);
}
// 使用模拟的方法创建出一个虚拟dom
var div = <div id='demo'>12345<spam>111</span></div>
// window.root根据index.html中的id选中标签div
render(div, window.root);
```


