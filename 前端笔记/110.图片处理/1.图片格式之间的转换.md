<script src='/笔记/see/index.js'></script>
[toc]


#### 常用方法
```js
// base64转file
function dataURItoFile(base64) {
    return blobToFile( dataURItoBlob(base64) )
}

// base64转blob
function dataURItoBlob(base64) {
    let byteString
    const arr = base64.split(',')

    if (arr[0].indexOf('base64') !== -1) {
        // 转回字符串数据
        byteString = atob(arr[1])
    } else {
        // 没有base64标志，使用unescape解码回字符串数据
        byteString = unescape(arr[1])
    }

    // 获取文件格式
    const mimeString = arr[0].split(':')[1].split(';')[0]
    // 创建一个8位无符号整型数组，长度为字符数据长度
    const ia = new Uint8Array(byteString.length)
    for (let i = 0; i < byteString.length; i++) {
        // 存入ascii码
        ia[i] = byteString.charCodeAt(i)
    }

    return new Blob([ia], { type: mimeString })
}

// blob转file
function blobToFile(blob) {
    return new File([blob], '文件名.png', { type: blob.type })
}

// file转base64
async function filetoDataURI(file) {
    return new Promise((res) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => {
            const src = reader.result;
            res(src);
        };
    })
}
// 根据路径或者base64创建一个img元素
async function getImage(src) {
    return new Promise((res) => {
        // 根据路径，创建一个image
        const img = new Image();
        img.src = src;
        // 源图片允许跨域，否则canvas转base64时，toDataURL会报错
        img.setAttribute('crossOrigin', 'anonymous')
        img.onload = () => {
            res(img);
        }
    })
}
```