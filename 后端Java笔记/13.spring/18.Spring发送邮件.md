
#### Springå‘é€é‚®ä»¶çš„æ“ä½œ
> éœ€è¦å€ŸåŠ©ä¸¤ä¸ªåŒ…
```xml
<!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context-support</artifactId>
    <version>5.3.4</version>
</dependency>
<!-- https://mvnrepository.com/artifact/javax.mail/mail -->
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.7</version>
</dependency>
```


> Springçš„é…ç½®
```xml
<bean id="sendEail" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <!-- ä»€ä¹ˆæ ¼å¼çš„é‚®ä»¶ -->
    <property name="host" value="smtp.qq.com"></property>
    <!-- é‚®ç®±å· -->
    <property name="username" value="2499302263@qq.com"></property>
    <!-- é…ç½®è®¤è¯å·(è·å–åœ¨ä¸‹é¢çš„åŸç”Ÿä¸­è¿›è¡Œäº†è¯´æ˜) -->
    <property name="password" value="tpywohqoimbfdjdf"></property>
    <!-- é…ç½®å­—ç¬¦é›† -->
    <property name="defaultEncoding" value="UTF-8"></property>
    <!-- é…ç½®ç«¯å£å· -->
    <property name="port" value="465"></property>
    <!-- å¤šä½™çš„é…ç½® -->
    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.ssl.enable">true</prop>
        </props>
    </property>
</bean>
```


> ä½¿ç”¨Springä¸­çš„é…ç½®ï¼Œå‘é€é‚®ä»¶
```java
public class Demo {
    private static ApplicationContext spring = new ClassPathXmlApplicationContext("demo.xml");

    public static void main(String[] str) throws MessagingException {
        // è·å–Springä¸­é…ç½®çš„å¯¹è±¡
        JavaMailSenderImpl session = (JavaMailSenderImpl)spring.getBean("sendEail");
        // åˆ›å»ºé‚®ç®±å¯¹è±¡
        MimeMessage message = session.createMimeMessage();
        // åˆ›å»ºå‘é€é‚®ä»¶å·¥å…·
        MimeMessageHelper helper = new MimeMessageHelper(message);
        // è®¾ç½®å‘ä»¶äºº
        helper.setFrom("2499302263@qq.com");
        // è®¾ç½®æ”¶ä»¶äºº(ä¸‰ç§æ¨¡å¼ï¼šTOæ”¶ä»¶äººï¼ŒCCæŠ„é€äººï¼ŒBCCå¯†é€)
        helper.setTo("2499302263@qq.com");
        // è®¾ç½®å‘é€çš„ä¸»é¢˜
        helper.setSubject("è¿™æ˜¯ä¸»é¢˜");
        // è®¾ç½®å‘é€çš„å†…å®¹
        helper.setText("è¿™æ˜¯å†…å®¹");
        // è¿›è¡Œå‘é€
        session.send(message);
    }
}
```





#### åŸç”Ÿçš„ä»£ç å‘é€é‚®ä»¶
> éœ€è¦å€ŸåŠ©ä¸€ä¸ªåŒ…
```xml
<!-- https://mvnrepository.com/artifact/javax.mail/mail -->
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.7</version>
</dependency>
```

> å‘é€é‚®ä»¶çš„ä»£ç å®ç°
```java
// åˆ›å»ºä¸€ä¸ªé‚®ä»¶å¯¹è±¡
private static Message createMessage(Session session) throws MessagingException {
    Message message = new MimeMessage(session);
    // è®¾ç½®å‘é€äºº
    message.setFrom(new InternetAddress("2499302263@qq.com"));
    // è®¾ç½®æ¥å—äººï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‘ç»™è°
    //   ç±»å‹ä¸€å…±æœ‰ä¸‰ç§ï¼ŒTOæ”¶ä»¶äººï¼ŒCCæŠ„é€äººï¼ŒBCCå¯†é€
    message.setRecipient(Message.RecipientType.TO, new InternetAddress("2499302263@qq.com"));
    // å‘ç»™ä¸€å †äºº
    // message.setRecipients();
    // è®¾ç½®å‘é€çš„æ—¶é—´ï¼Œæ¯”å¦‚è®¾ç½®ä¸€ä¸ªå°æ—¶åå‘é€ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°±ä½¿ç”¨é»˜è®¤çš„æ—¶é—´
    // message.setSentDate(new Date());
    // è®¾ç½®å‘é€çš„ä¸»é¢˜
    message.setSubject("ä¼Ÿè€ç‹—");
    // è®¾ç½®å‘é€çš„æ­£æ–‡ï¼ˆå†…å®¹ï¼‰
    message.setText("ä¼Ÿè€ç‹—ï¼Œç”¨Javaç»™ä½ å‘ä¸ªé‚®ä»¶ï¼Œæµ‹æµ‹Javaä»£ç ï¼Œä¸‰å…‹æ²¹ ğŸ˜„");

    // ä»¥ä¸Šè®¾ç½®ï¼Œä¿å­˜äº†æ‰èƒ½ç”Ÿæ•ˆ
    message.saveChanges();
    return message;
}
public static void main(String[] str) throws MessagingException {
    // é…ç½®å‘é€é‚®ä»¶çš„ä¸€äº›è§„åˆ™
    Properties properties = new Properties();
    // å®šä¹‰åè®®ï¼ˆå‚æ•°å›ºå®šï¼Œå¿…é¡»å®šä¹‰ï¼‰
    properties.put("mail.transport.protocol", "smtp");
    // è®¾ç½®å‘é€é‚®ä»¶çš„ä¸»æœºå(å‘é€é‚®ä»¶çš„é‚®ç®±å)ï¼Œæ¯”å¦‚ä½¿ç”¨QQé‚®ç®±å‘é€é‚®ä»¶
    properties.put("mail.smtp.host", "smtp.qq.com");
    // è®¾ç½®å‘é€é‚®ä»¶çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯25(å¯ä»¥ä¸ç”¨è®¾ç½®ï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤çš„)
    //   ç«¯å£å¦‚æœä¸å¯¹ï¼Œå¯ä»¥æ‰“å¼€ä¸‹é¢è®¤è¯çš„é‚£ä¸ªæœåŠ¡ï¼ˆSMTPï¼‰ï¼Œé‡Œé¢æœ‰å‘é€é‚®ä»¶çš„äº‹ä¾‹ï¼Œé‡Œé¢å°±æœ‰ç«¯å£
    properties.put("mail.smtp.port", "465");
    // è®¾ç½®å‘é€é‚®ä»¶æ—¶ï¼Œæ˜¯å¦éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ï¼Œtrueä¸ºéœ€è¦
    properties.put("mail.smtp.auth", true);
    // æ˜¯å¦ä½¿ç”¨sslå®‰å…¨è¿æ¥ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨
    properties.put("mail.smtp.ssl.enable", true);

    // åˆ›å»ºä¸€ä¸ªè¿æ¥
    Session session = Session.getDefaultInstance(properties);
    // è·å–å‘é€é‚®ä»¶çš„æµï¼Œè¿›è¡Œé‚®ä»¶çš„å‘é€
    Transport ts = session.getTransport();
    // è¿›è¡Œè®¤è¯
    // ts.connect("å‘é€é‚®ä»¶çš„é‚®ç®±", "è®¤è¯ç ");
    //  è®¤è¯ç çš„è·å–ï¼Œç™»é™†é‚®ç®±åï¼Œç‚¹å‡»é‚®ç®±å(è®¾ç½®)ï¼Œæ‰¾åˆ°POP3/IMAP/SMTP/Exchange/CardDAV/CalDAVæœåŠ¡
    //  ç„¶åï¼Œéšä¾¿æ‰¾åˆ°ä¸€ä¸ªæœåŠ¡ï¼Œç‚¹å‡»å¼€å¯ï¼ŒæŒ‰ç…§æç¤ºçš„ä¸œè¥¿æ“ä½œï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªè®¤è¯ç (æˆæƒç )
    //  å¦‚æœå·²ç»å¼€å¯ï¼Œåˆ™è®¤è¯ç æ˜¯ä¹‹å‰å¾—åˆ°çš„(æœ€å¥½åšä¸€ä¸‹ä¿å­˜)
    ts.connect("2499302263@qq.com", "tpywohqoimbfdjdf");

    // åˆ›å»ºé‚®ä»¶ä¿¡æ¯(å°è£…ä¸€ä¸ªå‡½æ•°)
    Message message = createMessage(session);

    // å‘é€é‚®ä»¶ï¼Œmessage.getAllRecipients()è·å–å‘é€äºº(æŠŠåˆ›å»ºçš„é‚®ä»¶ä¿¡æ¯ï¼Œå‘é€ç»™è°)
    ts.sendMessage(message, message.getAllRecipients());
    // å…³é—­æµ
    ts.close();
}
```