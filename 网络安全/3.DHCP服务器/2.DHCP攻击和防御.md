#### 攻击
- DHCP耗尽攻击
  - 用虚拟的mac地址，持续发送 Discover 报文，每次mac地址都不同
    - DHCP服务器，就是通过mac地址来区分是不是同一台电脑，如果不是，说明不是同一台电脑，于是就会从IP地址池里拿一个地址分配给该电脑。
    - 由于持续发送 Discover 报文，每次mac地址都不同，DHCP服务器的IP地址就会耗尽
  - 当DHCP服务器的IP地址耗尽后，正常电脑在联网的时候，此时地址池中已经没有IP地址进行分配了，获取不到IP地址，也就无法上网
  - 由于是假冒的。所以，DHCP服务器响应Offer包后，并没有后续步骤的进行（Request包的发送）
    - DHCP服务器迟迟没有接收到 Request包，分配的IP就会重新放在地址池中
    - 所以，耗尽攻击，要一直发送 Discover 报文，否则过一段时间，DHCP就会恢复正常（大概几分钟）

- DHCP假冒攻击
  - 在局域网中在搭建一台DHCP服务器，控制IP的分配和DNS分配
    - 可以搭建钓鱼网站。可以随便配置地址池（不是当前网段），让电脑上不了网
    - 比如：自己搭建了一个DNS解析的服务器，把 taobao 解析成了 123.4.5.6
      - 而这个网址对应的页面，是自己写的和官方的一样，用来套密码和用户
    - 正常的DHCP服务器肯定不会使用这个DNS，所以我们就需要搞一个DHCP服务器，进行假冒攻击
  - 通常配合DHCP耗尽攻击一起使用，否则效果不明显
    - 如果不配合使用，如果正常的DHCP先到，则假冒的就会忽略。如果假冒的先到，就会使用假冒的
    - 如果，先把正常的DHCP服务器中的IP耗尽，则正常的电脑在进行DHCP请求的时候，只能使用假冒的DHCP服务器
    - 耗尽攻击，正常的DHCP服务器可能会恢复正常，假冒攻击要注意这个时间差（时间一长，就变成现象一了，效果不明显）


#### 防御
- 防止DHCP假冒攻击
  - 在交换机上配置信任接口（只允许信任接口输出 offer报文，进行IP的分配 ）
    - 这样，假冒的DHCP服务器，就无法输出 offer报文，进行IP的分配

- 防止DHCP耗尽攻击
  - 建立，mac地址与端口的映射关系，防止一台电脑冒充多个mac地址，进行DHCP请求
    - 比如 F6 ---> 00:00:00:00:00:34
    - 当F6连接的电脑，进行耗尽攻击的时候，需要模拟mac地址，但是交换机一比较发现与缓存的不一样，就会忽略这个包
    - 这样，也就无法进行耗尽攻击了