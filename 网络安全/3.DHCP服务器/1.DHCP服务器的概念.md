#### 作用
- 这是一个给客户机自动分配IP的服务器
  - 使用的端口是UDP67和UDP68
  - 这两个端口是正常的DHCP服务端口，可以理解为一个发送，一个接收


- 每一个DHCP都有一个IP池
  - 当有客户机需要IP的时候，就从IP池里拿一个IP，给客户机使用
  - **并且，每一个IP都有一个使用时间**
  - 当时间一到，这个IP就会被收回，客户机会自动续约，延长使用时间


#### 客户机自动获取IP的流程
- **第一步**：DHCP Client以广播的方式发出DHCP Discover报文
  - 不确定那个是DHCP，所以就以广播的形式发送
  - 这样，就有可能有多个 DHCP 服务器接收到，然后给予响应
  - 这样，电脑就会接收到很多IP，**使用接受到的第一个IP，进行后续步骤**，谁先到用谁的
    - 其他DHCP服务器的IP，就会放回IP池中，为下一个电脑服务
- **第二步**：有的DHCP Server都会给出响应，向DHCP Client发送一个DHCP Offer报文
- **第三步**：DHCP Client会发出一个广播的DHCP Request报文，在选项字段中会加入选中的DHCP Server的IP地址和需要的IP地址。
- **第四步**：DHCP Server收到DHCP Request报文后，判断选项字段中的IP地址是否与自己的地址相同。如果相同，DHCP Server就会向DHCP Client响应一个DHCP ACK报文。


- DHCP Client接收到DHCP ACK报文后，检查DHCP Server分配的IP地址是否能够使用。
- DHCP Client在成功获取IP地址后，随时可以通过发送DHCP Release报文释放自己的IP地址。



#### 续约流程
- 每一个IP都有一个时间限制，如果时间快到了，就会自动往对应的DHCP服务器，发送续约请求
- DHCP服务器接收到续约请求，就会延长收回的时间
  - 延长的时间，就是IP默认使用的时间
- 如果此时电脑离开了网络，就无法发送续约请求，时间一到DHCP，就把IP收回，放回到IP池中，供下一个客户使用



#### IP保留
- IP会进行保留
  - **时间没到，IP就不会被DHCP收回，即使客户已经下线**
- 如果IP，没有被收回，客户又连上了，还是使用这个IP