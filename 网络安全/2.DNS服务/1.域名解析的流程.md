#### 以www.baidu.com.为例

- 第一步发送给路由器
  - 路由器看看缓存有没有
  - 然后在看本地hosts文件中有没有
- 如果都没有，路由器就会找配置的DNS服务器，由他进行解析
  - 先找第一个DNS，如果能通，找不到就找不到了，不会去第二个DNS
  - 如果第一个DNS坏掉了，53端口没有跑通，则去找第二个DNS（备用DNS）
  - 如果 DNS 中有，则直接返回
  - 如果 DNS 中没有，看缓存中有没有
- 如果DNS服务也没有找到，DNS就会想办法
  - 先去 DNS根服务器下找一找有没有（也就是最后那个 . ）
    - 把 www.baidu.com. 发送给 DNS根服务器。这个服务器是固定的，所有的DNS都知道
    - DNS根服务下一找，也没有。但是DNS根服务知道，com 对应的DNS服务器在哪
    - **于是返回 com对应的 DNS服务器**
  - 然后 DNS服务器，就会去 com对应的 DNS服务器下找一找有没有
    - 把 www.baidu.com. 发送给 com对应的DNS服务器。
    - com对应的DNS服务器下一找，也没有。但是它知道，baidu 对应的DNS服务器在哪
    - **于是返回 baidu对应的 DNS服务器**
  - 然后 DNS服务器，就会去 baidu对应的 DNS服务器下找一找有没有
    - 把 www.baidu.com. 发送给 baidu对应的DNS服务器。
    - 找到了，就返回给DNS服务器
- **DNS经过千辛万苦找到了对应的ip，就会缓存起来**
- 如果没有找到，DNS服务器就会给响应，告诉客户端没有找到



#### DNS指定上一级
- 上面介绍，如果一个域名，DNS服务中找不到对应的关系，就会去根服务下去找。然后经过复杂的查询过程，才能找到对应的IP。
  - **这样，就会对服务器造成很大的压力**
    - 来一堆解析请求，每一个域名都可能发送三四个请求，才能成功解析
- 可以通过指定上一家DNS服务器，缓解压力
  - 当DNS解析不了的时候，就发给上一家DNS服务器，让他去寻找（这样压力全在上一级DNS服务器了）
    - 上一级DNS服务器，一般不是自己搭建的，而是公用的，性能比较好。
  - 这样的话，自己就不用经过复杂的查询过程了，只需要发送一个请求，然后等着上一家的返回结果就可以了
    - 来一堆解析请求，本来每一个域名都可能发送三四个请求，才能成功解析，现在只发送一个请求，压力瞬间下降