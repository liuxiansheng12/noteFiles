- 一个磁盘有很多存储空间，如果不对这些存储单元进行划分管理，文件的读写就会很麻烦
- 为了快速的存储和读取文件，在分区完成后，就要安装一个文件系统(常用的是ext4)

#### 概念
- 文件系统，有三个概念
- block
  - 文件系统，把分区存储空间，划分了一块一块的。每一块被称为一个 `block`，用来存储数据 
  - 每一个 block 为 4k
  - 每个 block 只会存入一次数据，比如
    - 如果一个文件为 2k，就会占用一个 block
    - 如果另一个文件为 2k，会占用一个新的 block
    - 并不会两个文件共用一个block。这样做的原因，便于管理
  - **空间碎片**
    - 如果，先存了一个 10k 的文件。占用三个 block
    - 随后，又存了一个 3k 的文件。占用一个 block
    - 然后，删除了之前存的 10k 文件，这样就空了三个 block
    - 如果，又存了一个 13k 的文件。它需要占用 4个 block
      - 但是，之前只空了三个 block，后一个已经被 3k 的文件给占了
      - 所以，这个 13k 文件，就会**占用之前三个 block ，然后在后面在用一个 block**
      - 这样，这个文件存储位置就会被隔开
      - **像这些零碎的空间，就被称为空间碎片**
  - 由于空间碎片的问题，所以不知道一个文件的数据到底存到了那个位置的 block。可能东一个西一个，存的乱七八糟。
    - **所以，为了快速的找到一个文件所占用的block,便于读取，就会把这些 block 记录下来，这就是 inode**

- inode
  - 存储文件的索引，每一个文件都会有一个inode
  - 但是 block 可能会有多个
    - 比如一个文件，2k。就会占用一个 block
    - 比如一个文件，7k。就会占用两个 block
  - 一个 inode，所占的存储空间为 128b
  - 并且，**一个文件系统（分区）的 inode 的数量是有限的**。
    - 所以，一个分区存储的文件的数量是有限的
    - 因为，一个文件，必须有一个 inode 对应。如果 inode 用完了，所以文件就存不了了。
    - **即使有存储空间也不行**

#### 文件存储的限制
- 受存储空间的限制，如果block用完了，文件自然存储不了
- 受inode限制，如果inode用完了，文件也存储不了
  - 很多情况，一个磁盘存的全是小文件，体积很小，但是文件数多
  - 存着存着发现存不了了，但是用指令一查看，这个分区还有很大的存储空间
  - 此时就会很纳闷，明明有空间，为什么存不了了
  - **就是因为 inode 用完了**

#### inode 总量的查询
- inode的数量并不是固定的，而是和分区容量有关
  - 如果分区容量多，inode 的数量自然会多
- 查询方式：
  - 输入指令：`df -i`
  - <img src='https://lsz.net.cn/node/imgs/757286946fde8579a94ad3a01b2455ce.png' />

#### 查询某个文件对应的 inode 编号
- 输入指令：`ls -l -i /demo/a.txt`
  - /demo/a.txt 表示文件路径
  - <img src='https://lsz.net.cn/node/imgs/c02e9eb0a1a96c01226d68f3a379b7a1.png' />
